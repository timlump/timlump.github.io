<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>timcostigan.com</title>
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div id="header">
            <a class="title" href="/">
                timcostigan.com
            </a>
            <br/>
            <a class="external_link" href="https://github.com/timlump">github</a>
        </div>
        <script>
            function load_article(name) {
                let filename = `content/${name}`;

                const new_article = document.createElement("div");
                new_article.className = 'article';
                new_article.id = filename;
                document.body.appendChild(new_article);

                fetch(filename)
                    .then(response => response.text())
                    .then((data) => {
                        let element = document.getElementById(filename);
                        console.log(element);
                        element.innerHTML = data;
                    });
            }

            let params = new URLSearchParams(window.location.search);

            if (params.has('article')) {
                load_article(params.get('article'));
            }
            else {
                fetch('content/index.txt')
                .then(response => response.text())
                .then((data) => {
                    let lines = data.split('\n');
                    for(let idx = 0; idx < lines.length; idx++) {
                        load_article(lines[idx]);
                    }
                });
            }
        </script>
    </body>
</html>